<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>StringWasp</title>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>

  <!-- Panic Button -->
  <button id="panicButton" title="Emergency Panic Mode">🆘</button>

  <!-- Top Navigation Tabs -->
  <div class="tabs">
    <button class="tabButton active" data-tab="chats">Chats</button>
    <button class="tabButton" data-tab="friends">Friends</button>
    <button class="tabButton" data-tab="groups">Groups</button>
    <button class="tabButton" data-tab="explore">Explore</button>
    <button class="tabButton" data-tab="settings">Settings</button>
  </div>

  <!-- Main Container -->
  <div id="appLayout">

    <!-- Chats Tab -->
    <div id="chats" class="tabContent active">
      <div class="leftPanel">
        <div class="searchBar">
          <input type="text" id="globalSearchInput" placeholder="Search..." />
          <button id="globalSearchBtn">🔍</button>
        </div>
        <div id="chatList" class="chatList"></div>
      </div>
      <div class="rightPanel">
        <div id="chatWindow" class="chatWindow hidden">
          <div class="chatHeader">
            <img id="chatHeaderImage" src="" alt="Avatar" />
            <div>
              <div id="chatHeaderName">Username</div>
              <div id="chatHeaderSubtext">Status / Role</div>
            </div>
            <button id="chatSettingsBtn">⚙️</button>
          </div>

          <div id="messagesContainer" class="messagesContainer"></div>

          <div id="typingIndicator" class="typingIndicator hidden">Typing...</div>

          <div class="chatInputArea">
            <input type="text" id="messageInput" placeholder="Type a message..." />
            <button id="sendMessageBtn">➤</button>
            <label class="anonToggle" title="Send Anonymously">
              <input type="checkbox" id="anonymousToggle" /> Anonymous
            </label>
          </div>
        </div>
      </div>
    </div>

    <!-- Friends Tab -->
    <div id="friends" class="tabContent">
      <h2>Friends</h2>
      <div id="friendList" class="friendList"></div>

      <h3>Incoming Requests</h3>
      <div id="friendRequests" class="requestList"></div>

      <h3>Sent Requests</h3>
      <div id="sentRequests" class="requestList"></div>
    </div>

    <!-- Groups Tab -->
    <div id="groups" class="tabContent">
      <h2>Groups</h2>
      <div class="groupControls">
        <button id="createGroupBtn">➕ Create Group</button>
        <input type="text" id="joinGroupIdInput" placeholder="Enter Group ID" />
        <button id="joinGroupBtn">Join</button>
      </div>
      <div id="groupList" class="groupList"></div>
    </div>

    <!-- Explore Tab -->
    <div id="explore" class="tabContent">
      <h2>Explore Users</h2>
      <div id="exploreList" class="exploreList"></div>
    </div>

    <!-- Settings Tab -->
    <div id="settings" class="tabContent">
      <h2>Settings</h2>

      <label>Display Name:
        <input type="text" id="displayNameInput" placeholder="Your name" />
      </label>

      <label>Theme:
        <select id="themeSelect">
          <option value="light">Light</option>
          <option value="dark">Dark</option>
        </select>
      </label>

      <label>Emotion:
        <select id="emotionSelect">
          <option value="😊">😊 Happy</option>
          <option value="😐">😐 Neutral</option>
          <option value="😢">😢 Sad</option>
          <option value="😠">😠 Angry</option>
        </select>
      </label>

      <label>Profile Picture:
        <input type="file" id="profilePicUpload" accept="image/*" />
      </label>

      <label>Profile Music:
        <input type="file" id="musicUpload" accept="audio/*" />
      </label>

      <button id="logoutBtn">🚪 Log Out</button>
      <button id="deleteAccountBtn">❌ Delete Account</button>
    </div>
  </div>

  <!-- Create Group Modal -->
  <div id="createGroupModal" class="modal hidden">
    <div class="modalContent">
      <h2>Create Group</h2>
      <input type="text" id="groupNameInput" placeholder="Group name" />
      <select id="groupPrivacySelect">
        <option value="public">Public</option>
        <option value="private">Private</option>
      </select>
      <button id="confirmCreateGroupBtn">Create</button>
      <button onclick="closeModal('createGroupModal')">Cancel</button>
    </div>
  </div>

  <!-- Thread Modal -->
  <div id="threadModal" class="modal hidden">
    <div class="modalContent">
      <h2>Thread</h2>
      <div id="threadMessages" class="threadMessages"></div>
      <input type="text" id="threadReplyInput" placeholder="Reply..." />
      <button id="sendThreadReplyBtn">Send</button>
      <button onclick="closeModal('threadModal')">Close</button>
    </div>
  </div>

  <!-- Toast Notification -->
  <div id="toast" class="toast hidden">Toast Message</div>

  <!-- Spinner Loader -->
  <div id="loadingSpinner" class="spinner hidden">⏳ Loading...</div>

  <!-- Music Audio Player -->
  <audio id="profileMusic" controls class="hidden"></audio>

  <!-- Firebase and Main Script -->
  <script src="firebase.js"></script>
  <script src="app.js"></script>
</body>
</html>
