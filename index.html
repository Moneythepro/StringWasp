<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>StringWasp</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="favicon.ico" />
</head>
<body>
  <div id="loader">Loading...</div>
  
  <div id="app" class="hidden">
    <header>
      <h1>StringWasp</h1>
      <button id="panicButton">Panic</button>
    </header>

    <nav>
      <button data-tab="chats">Chats</button>
      <button data-tab="groups">Groups</button>
      <button data-tab="friends">Friends</button>
      <button data-tab="explore">Explore</button>
      <button data-tab="profile">Profile</button>
    </nav>

    <main>
      <!-- Chats Tab -->
      <section id="chatsTab" class="tab">
        <h2>Chats</h2>
        <div id="chatList"></div>
        <div id="chatBox" class="chat-box hidden">
          <div id="chatMessages" class="messages"></div>
          <div id="chatLoading" class="loading-spinner hidden">Loading...</div>
          <input type="text" id="chatInput" placeholder="Type a message"/>
          <label><input type="checkbox" id="anonToggle" /> Send Anonymously</label>
          <button id="sendChatBtn">Send</button>
        </div>
      </section>

      <!-- Groups Tab -->
      <section id="groupsTab" class="tab hidden">
        <h2>Groups</h2>
        <div id="groupList"></div>
        <form id="createGroupForm">
          <input type="text" id="groupName" placeholder="Group Name" required/>
          <label><input type="checkbox" id="isPrivateGroup" /> Private</label>
          <button type="submit">Create Group</button>
        </form>
        <form id="joinGroupForm">
          <input type="text" id="joinGroupId" placeholder="Group ID" required/>
          <button type="submit">Join Group</button>
        </form>
        <div id="groupChatBox" class="chat-box hidden">
          <div id="groupChatMessages" class="messages"></div>
          <div id="groupChatLoading" class="loading-spinner hidden">Loading...</div>
          <input type="text" id="groupChatInput" placeholder="Type a group message"/>
          <label><input type="checkbox" id="groupAnonToggle" /> Anonymous</label>
          <button id="sendGroupMsgBtn">Send</button>
        </div>
      </section>

      <!-- Friends Tab -->
      <section id="friendsTab" class="tab hidden">
        <h2>Friends</h2>
        <div id="friendList"></div>
        <div id="friendRequests"></div>
      </section>

      <!-- Explore Tab -->
      <section id="exploreTab" class="tab hidden">
        <h2>Explore</h2>
        <div id="exploreUsers"></div>
      </section>

      <!-- Profile Tab -->
      <section id="profileTab" class="tab hidden">
        <h2>Profile</h2>
        <img id="profilePic" src="" alt="Profile Picture"/>
        <input type="file" id="uploadPic" />
        <input type="text" id="displayNameInput" placeholder="Display Name"/>
        <button id="saveProfile">Save</button>

        <div class="settings">
          <label><input type="checkbox" id="themeToggle" /> Dark Mode</label>
          <label><input type="checkbox" id="musicToggle" /> Profile Music</label>
          <label><input type="checkbox" id="emotionToggle" /> Emotional Mode</label>
          <label><input type="checkbox" id="lastSeenToggle" /> Last Seen</label>
        </div>

        <button id="logoutBtn">Log Out</button>
        <button id="deleteAccountBtn">Delete Account</button>
      </section>
    </main>
  </div>

  <!-- Toast Notification -->
  <div id="toast" class="toast hidden"></div>

  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-storage.js"></script>
  <script src="firebase.js"></script>
  <script src="app.js"></script>
</body>
</html>
